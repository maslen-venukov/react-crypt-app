import React, { useState, useEffect } from 'react';
import { Link, useHistory } from 'react-router-dom';

const Sidebar = () => {
  const history = useHistory();
  const [activeLink, setActiveLink] = useState('');

  useEffect(() => {
    setActiveLink(history.location.pathname);
  }, [history.location.pathname])

  history.listen(location => setActiveLink(location.pathname));

  return (
    <aside className="sidebar">
      <h1 className="sidebar__logo logo">
        <Link to="/" className="logo__link">
          <svg className="logo__icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" fill="#b8bcd5">
            <path d="m256 280c-8.269531 0-15 6.730469-15 15s6.730469 15 15 15 15-6.730469 15-15-6.730469-15-15-15zm0 0" />
            <path
              d="m361 315.839844v-1.679688c0-57.433594-47.101562-104.160156-105-104.160156s-105 46.726562-105 104.160156v1.679688c0 57.433594 47.101562 104.160156 105 104.160156s105-46.726562 105-104.160156zm-90 21.582031v42.578125h-30v-42.578125c-17.460938-6.195313-30-22.867187-30-42.421875 0-24.8125 20.1875-45 45-45s45 20.1875 45 45c0 19.554688-12.539062 36.226562-30 42.421875zm0 0" />
            <path
              d="m462 149c-27.570312 0-50 22.429688-50 50 0 22.347656 14.734375 41.3125 35 47.699219v50.160156l-56.367188 29.074219c-.984374 13.371094-3.960937 26.199218-8.628906 38.203125l94.996094-48.996094v-68.441406c20.265625-6.386719 35-25.351563 35-47.699219 0-27.570312-22.429688-50-50-50zm0 0" />
            <path
              d="m236 181.472656v-71.472656c0-11.027344 8.972656-20 20-20s20 8.972656 20 20v71.472656c37.019531 5.476563 69.175781 25.910156 90 54.890625v-126.363281c0-60.652344-49.347656-110-110-110s-110 49.347656-110 110v126.363281c20.824219-28.980469 52.980469-49.414062 90-54.890625zm0 0" />
            <path
              d="m425 412c-22.347656 0-41.3125 14.734375-47.699219 35h-53.398437l-10.464844-9.742188c-10.28125 4.8125-21.261719 8.375-32.757812 10.492188l31.417968 29.25h65.203125c6.386719 20.265625 25.351563 35 47.699219 35 27.570312 0 50-22.429688 50-50s-22.429688-50-50-50zm0 0" />
            <path
              d="m97.699219 348c-6.386719-20.265625-25.351563-35-47.699219-35-27.570312 0-50 22.429688-50 50s22.429688 50 50 50c22.347656 0 41.3125-14.734375 47.699219-35h38.625c-4.960938-9.402344-8.832031-19.457031-11.4375-30zm0 0" />
            <path
              d="m65.398438 259.898438c8.191406 0 16.074218-1.964844 23.128906-5.65625l34.816406 34.8125c2.128906-11.210938 5.671875-21.9375 10.441406-31.980469l-24.054687-24.054688c9.8125-18.84375 6.824219-42.675781-8.976563-58.476562-9.445312-9.445313-22-14.644531-35.355468-14.644531-13.355469 0-25.914063 5.199218-35.355469 14.644531-9.445313 9.445312-14.644531 22-14.644531 35.355469 0 13.355468 5.199218 25.910156 14.644531 35.355468 9.441406 9.441406 22 14.644532 35.355469 14.644532zm0 0" />
          </svg>
          <span className="logo__text">EnCrypt</span>
        </Link>
      </h1>
      <nav className="nav">
        <ul className="nav__list">
          <li className="nav__item">
            <Link to="/encrypt" className={`nav__link ${activeLink === '/encrypt' ? 'active' : ''}`}>Зашифровать</Link>
          </li>
          <li className="nav__item">
            <Link to="/decrypt" className={`nav__link ${activeLink === '/decrypt' ? 'active' : ''}`}>Расшифровать</Link>
          </li>
        </ul>
      </nav>
    </aside>
  )
}

export default Sidebar;